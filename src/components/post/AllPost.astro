---
import { getCollection } from "astro:content";
import PostGrid from "./PostGrid.astro";

interface Props {
    limit: number;
    postType: string;
}

const { limit, postType } = Astro.props;

let posts;
if (postType === "all") {
    posts = (await getCollection("posts"))
        .slice(0, limit)
        .sort(
            (a: any, b: any) =>
                b.data.updatedDate.valueOf() - a.data.updatedDate.valueOf(),
        );
} else {
    posts = (await getCollection("posts"))
        .filter((x) => x.data.tags?.includes(postType))
        .slice(0, limit)
        .sort(
            (a: any, b: any) =>
                b.data.updatedDate.valueOf() - a.data.updatedDate.valueOf(),
        );
}
---

<PostGrid posts={posts} />
